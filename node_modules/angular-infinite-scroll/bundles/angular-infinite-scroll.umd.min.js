!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("rxjs"),require("rxjs/operators"),require("@angular/core")):"function"==typeof define&&define.amd?define("angular-infinite-scroll",["exports","@angular/common","rxjs","rxjs/operators","@angular/core"],e):e(t["angular-infinite-scroll"]={},t.ng.common,t.rxjs,t.rxjs.operators,t.ng.core)}(this,function(t,i,n,s,e){"use strict";var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function r(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var u=4,p=0,a=100,c=0,d=function(){function t(t,e){var i=this;this._differs=t,this.zone=e,this._userEnd$=new n.Observable,this._end$=new n.Subject,this._updateAfterRender$=new n.Subject,this.position=p,this.step=u,this.offset=a,this.delay=c,this.loading$=new n.BehaviorSubject(!1),e.runOutsideAngular(function(){window.addEventListener("scroll",function(){return i._update()}),window.addEventListener("resize",function(){return i._update()})})}return t.prototype.ngOnInit=function(){var t=this;this._subscriptionLoadingEnd=n.merge(this._userEnd$,this._updateAfterRender$).subscribe(function(){return t.loading$.next(!1)}),this._subscriptionUpdateAfterRender=this._updateAfterRender$.pipe(s.switchMap(function(){return n.interval(t.delay).pipe(s.take(1))})).subscribe(function(){return t._update()}),this._update()},t.prototype.ngDoCheck=function(){this._ngFor&&this._ngFor.ngDoCheck()},t.prototype.ngOnDestroy=function(){this.destroy(this._subscriptionEnd),this.destroy(this._subscriptionLoading),this.destroy(this._subscriptionLoadingEnd),this.destroy(this._subscriptionUpdateAfterRender)},t.prototype.createNgFor=function(t,e){this._ngFor=new i.NgForOf(t,e,this._differs)},t.prototype.subscribeLoading=function(t){this.destroy(this._subscriptionLoading),this._subscriptionLoading=this.loading$.subscribe(t)},t.prototype.subscribeEnd=function(t){var e=this;this.destroy(this._subscriptionEnd),this._userEnd$=this._end$.pipe(s.exhaustMap(function(){return t(e.position,e.step)})),this._subscriptionEnd=this._userEnd$.subscribe(this.newItems.bind(this),function(){return e.newItems.bind(e)([])})},t.prototype._update=function(){var t=this;window.innerHeight+window.scrollY>=document.body.offsetHeight-this.offset&&this.zone.runOutsideAngular(function(){t.update()})},t.prototype.destroy=function(t){t&&!t.closed&&t.unsubscribe()},t}(),h=function(){function t(t){this.template=t,this.enabled=!1}return t.decorators=[{type:e.Directive,args:[{selector:"[infiniteStatic]"}]}],t.ctorParameters=function(){return[{type:e.TemplateRef}]},t}(),f=function(){function t(t){this.template=t}return t.decorators=[{type:e.Directive,args:[{selector:"[infiniteTemplate]"}]}],t.ctorParameters=function(){return[{type:e.TemplateRef}]},t}(),l=function(n){function t(t,e){var i=n.call(this,t,e)||this;return i._dummies=0,i._outOfItems=!1,i}return r(t,n),Object.defineProperty(t.prototype,"loading",{set:function(t){this.subscribeLoading(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{set:function(t){this.subscribeEnd(t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterContentInit=function(){this._itemsStatic=this.staticMarkers.toArray(),this.updateItems(),this.update()},t.prototype.update=function(){this._items||(this._items=[],this._dummies=0),!this._items||this._items.length&&!this._items.every(function(t){return t===undefined})||(this._items=[],this._dummies=0,this.addDummies());var t=0;this._itemsStatic&&(t=this._itemsStatic.length),this.position<t?(this.loading$.next(!0),this._updateAfterRender$.next(),this.updateItems(),this.position+=this.step):t+this.position<this._items.length-this._dummies?(this.loading$.next(!0),this._updateAfterRender$.next(),this.position+=this.step):this._subscriptionEnd&&(this.loading$.next(!0),this._end$.next(),this.addDummies(),this.position+=this.step)},t.prototype.newItems=function(t){for(var e=this;0<this._dummies;)this._items.length&&this._items.pop(),this._dummies--;var i=Array.from(t);this.zone.run(function(){e._items=e._items.concat(i)}),i.length?this._updateAfterRender$.next():this._outOfItems=!0},t.prototype.updateItems=function(){var e=this;this.zone.run(function(){for(var t in e._itemsStatic)e._itemsStatic[t].enabled=e.position>t})},t.prototype.addDummies=function(){var t=this;this.zone.run(function(){t._dummies||t._outOfItems||(t._items=t._items.concat(Array(t.step).fill(undefined)),t._dummies+=t.step)})},t.decorators=[{type:e.Component,args:[{selector:"infinite-scroll",template:'\n    <ng-template ngFor let-item [ngForOf]="_itemsStatic">\n      <ng-template [ngIf]="item.enabled">\n        <ng-container *ngTemplateOutlet="item.template"></ng-container>\n      </ng-template>\n    </ng-template>\n    <ng-template ngFor let-item [ngForOf]="_items">\n      <ng-container *ngTemplateOutlet="templateMarker.template; context: {$implicit: item}"></ng-container>\n    </ng-template>'}]}],t.ctorParameters=function(){return[{type:e.IterableDiffers},{type:e.NgZone}]},t.propDecorators={staticMarkers:[{type:e.ContentChildren,args:[h]}],templateMarker:[{type:e.ContentChild,args:[f]}],dynamicTemplate:[{type:e.ViewChild,args:["dynamic"]}],position:[{type:e.Input}],step:[{type:e.Input}],offset:[{type:e.Input}],delay:[{type:e.Input}],loading:[{type:e.Input}],end:[{type:e.Input}]},t}(d),m=function(o){function t(t,e,i,n){var s=o.call(this,i,n)||this;return s._positionInitial=p,s._dummies=0,s._outOfItems=!1,s.step=u,s.offset=a,s.delay=c,s.createNgFor(t,e),s}return r(t,o),Object.defineProperty(t.prototype,"infiniteScrollOf",{set:function(t){t&&(this._items=Array.from(t)),this.position=this._positionInitial,this._dummies=0,this.updateItems(),this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"infiniteScrollTrackBy",{get:function(){return this._ngFor.ngForTrackBy},set:function(t){this._ngFor.ngForTrackBy=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"infiniteScrollTemplate",{set:function(t){this._ngFor.ngForTemplate=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"infiniteScrollPosition",{set:function(t){t===undefined||null===t?this.position=p:this.position=t,this._positionInitial=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"infiniteScrollLoading",{set:function(t){this.subscribeLoading(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"infiniteScrollEnd",{set:function(t){this.subscribeEnd(t)},enumerable:!0,configurable:!0}),t.prototype.update=function(){this._items||(this._items=[]),!this._items||this._items.length&&!this._items.every(function(t){return t===undefined})||(this._items=[],this.addDummies(),this.updateItems()),this.position<this._items.length-this._dummies?(this.loading$.next(!0),this.updateItems(),this._updateAfterRender$.next(),this.position+=this.step):this._subscriptionEnd&&(this.loading$.next(!0),this._end$.next(),this.position+=this.step,this.addDummies(),this.updateItems())},t.prototype.newItems=function(t){for(;0<this._dummies;)this._items.length&&this._items.pop(),this._dummies--;var e=Array.from(t);this._items=this._items.concat(e),this.updateItems(),e.length?this._updateAfterRender$.next():this._outOfItems=!0},t.prototype.updateItems=function(){var t=this;this.zone.run(function(){t._items&&(t._ngFor.ngForOf=t._items.slice(0,t.position))})},t.prototype.addDummies=function(){this._dummies||this._outOfItems||(this._items=this._items.concat(Array(this.step).fill(undefined)),this._dummies+=this.step)},t.decorators=[{type:e.Directive,args:[{selector:"[infiniteScroll]"}]}],t.ctorParameters=function(){return[{type:e.ViewContainerRef},{type:e.TemplateRef},{type:e.IterableDiffers},{type:e.NgZone}]},t.propDecorators={infiniteScrollOf:[{type:e.Input}],infiniteScrollTrackBy:[{type:e.Input}],infiniteScrollTemplate:[{type:e.Input}],infiniteScrollPosition:[{type:e.Input}],step:[{type:e.Input,args:["infiniteScrollStep"]}],offset:[{type:e.Input,args:["infiniteScrollOffset"]}],delay:[{type:e.Input,args:["infiniteScrollDelay"]}],infiniteScrollLoading:[{type:e.Input}],infiniteScrollEnd:[{type:e.Input}]},t}(d),_=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[m,l,h,f],imports:[i.CommonModule],exports:[m,l,h,f]}]}],t}();t.InfiniteScrollModule=_,t.ɵb=d,t.ɵe=l,t.ɵc=h,t.ɵd=f,t.ɵa=m,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-infinite-scroll.umd.min.js.map