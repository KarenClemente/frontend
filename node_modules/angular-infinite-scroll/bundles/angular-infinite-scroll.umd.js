(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('rxjs'), require('rxjs/operators'), require('@angular/core')) :
    typeof define === 'function' && define.amd ? define('angular-infinite-scroll', ['exports', '@angular/common', 'rxjs', 'rxjs/operators', '@angular/core'], factory) :
    (factory((global['angular-infinite-scroll'] = {}),global.ng.common,global.rxjs,global.rxjs.operators,global.ng.core));
}(this, (function (exports,common,rxjs,operators,core) { 'use strict';

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    /* global Reflect, Promise */
    var extendStatics = function (d, b) {
        extendStatics = Object.setPrototypeOf ||
            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
            function (d, b) { for (var p in b)
                if (b.hasOwnProperty(p))
                    d[p] = b[p]; };
        return extendStatics(d, b);
    };
    function __extends(d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var DEFAULTS = {
        STEP: 4,
        POSITION: 0,
        OFFSET: 100,
        DELAY: 0
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @abstract
     * @template T
     */
    var /**
     * @abstract
     * @template T
     */ InfiniteScroll = (function () {
        function InfiniteScroll(_differs, zone) {
            var _this = this;
            this._differs = _differs;
            this.zone = zone;
            this._userEnd$ = new rxjs.Observable();
            this._end$ = new rxjs.Subject();
            this._updateAfterRender$ = new rxjs.Subject();
            this.position = DEFAULTS.POSITION;
            this.step = DEFAULTS.STEP;
            this.offset = DEFAULTS.OFFSET;
            this.delay = DEFAULTS.DELAY;
            this.loading$ = new rxjs.BehaviorSubject(false);
            zone.runOutsideAngular(function () {
                window.addEventListener('scroll', function () { return _this._update(); });
                window.addEventListener('resize', function () { return _this._update(); });
            });
        }
        /**
         * @return {?}
         */
        InfiniteScroll.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this._subscriptionLoadingEnd = rxjs.merge(this._userEnd$, this._updateAfterRender$).subscribe(function () { return _this.loading$.next(false); });
                this._subscriptionUpdateAfterRender =
                    this._updateAfterRender$.pipe(operators.switchMap(function () { return rxjs.interval(_this.delay).pipe(operators.take(1)); })).subscribe(function () { return _this._update(); });
                this._update();
            };
        /**
         * @return {?}
         */
        InfiniteScroll.prototype.ngDoCheck = /**
         * @return {?}
         */
            function () {
                if (this._ngFor) {
                    this._ngFor.ngDoCheck();
                }
            };
        /**
         * @return {?}
         */
        InfiniteScroll.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.destroy(this._subscriptionEnd);
                this.destroy(this._subscriptionLoading);
                this.destroy(this._subscriptionLoadingEnd);
                this.destroy(this._subscriptionUpdateAfterRender);
            };
        /**
         * @param {?} viewContainer
         * @param {?} template
         * @return {?}
         */
        InfiniteScroll.prototype.createNgFor = /**
         * @param {?} viewContainer
         * @param {?} template
         * @return {?}
         */
            function (viewContainer, template) {
                this._ngFor = new common.NgForOf(viewContainer, template, this._differs);
            };
        /**
         * @param {?} loading
         * @return {?}
         */
        InfiniteScroll.prototype.subscribeLoading = /**
         * @param {?} loading
         * @return {?}
         */
            function (loading) {
                this.destroy(this._subscriptionLoading);
                this._subscriptionLoading = this.loading$.subscribe(loading);
            };
        /**
         * @param {?} scrollEnd
         * @return {?}
         */
        InfiniteScroll.prototype.subscribeEnd = /**
         * @param {?} scrollEnd
         * @return {?}
         */
            function (scrollEnd) {
                var _this = this;
                this.destroy(this._subscriptionEnd);
                this._userEnd$ = this._end$.pipe(operators.exhaustMap(function () { return scrollEnd(_this.position, _this.step); }));
                this._subscriptionEnd = this._userEnd$.subscribe(this.newItems.bind(this), function () { return _this.newItems.bind(_this)([]); });
            };
        /**
         * @return {?}
         */
        InfiniteScroll.prototype._update = /**
         * @return {?}
         */
            function () {
                var _this = this;
                /** @type {?} */
                var scrollHeight = window.innerHeight + window.scrollY;
                if (scrollHeight >= document.body.offsetHeight - this.offset) {
                    this.zone.runOutsideAngular(function () {
                        _this.update();
                    });
                }
            };
        /**
         * @param {?} subscription
         * @return {?}
         */
        InfiniteScroll.prototype.destroy = /**
         * @param {?} subscription
         * @return {?}
         */
            function (subscription) {
                if (subscription && !subscription.closed) {
                    subscription.unsubscribe();
                }
            };
        return InfiniteScroll;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @template T
     */
    var InfiniteStaticMarker = (function () {
        function InfiniteStaticMarker(template) {
            this.template = template;
            this.enabled = false;
        }
        InfiniteStaticMarker.decorators = [
            { type: core.Directive, args: [{ selector: '[infiniteStatic]' },] },
        ];
        /** @nocollapse */
        InfiniteStaticMarker.ctorParameters = function () {
            return [
                { type: core.TemplateRef }
            ];
        };
        return InfiniteStaticMarker;
    }());
    /**
     * @template T
     */
    var InfiniteTemplateMarker = (function () {
        function InfiniteTemplateMarker(template) {
            this.template = template;
        }
        InfiniteTemplateMarker.decorators = [
            { type: core.Directive, args: [{ selector: '[infiniteTemplate]' },] },
        ];
        /** @nocollapse */
        InfiniteTemplateMarker.ctorParameters = function () {
            return [
                { type: core.TemplateRef }
            ];
        };
        return InfiniteTemplateMarker;
    }());
    /**
     * @template T
     */
    var InfiniteScrollComponent = (function (_super) {
        __extends(InfiniteScrollComponent, _super);
        function InfiniteScrollComponent(differs, zone) {
            var _this = _super.call(this, differs, zone) || this;
            _this._dummies = 0;
            _this._outOfItems = false;
            return _this;
        }
        Object.defineProperty(InfiniteScrollComponent.prototype, "loading", {
            set: /**
             * @param {?} loading
             * @return {?}
             */ function (loading) {
                this.subscribeLoading(loading);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(InfiniteScrollComponent.prototype, "end", {
            set: /**
             * @param {?} scrollEnd
             * @return {?}
             */ function (scrollEnd) {
                this.subscribeEnd(scrollEnd);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        InfiniteScrollComponent.prototype.ngAfterContentInit = /**
         * @return {?}
         */
            function () {
                this._itemsStatic = this.staticMarkers.toArray();
                this.updateItems();
                this.update();
            };
        /**
         * @return {?}
         */
        InfiniteScrollComponent.prototype.update = /**
         * @return {?}
         */
            function () {
                if (!this._items) {
                    this._items = [];
                    this._dummies = 0;
                }
                if (this._items && (!this._items.length || this._items.every(function (item) { return item === undefined; }))) {
                    this._items = [];
                    this._dummies = 0;
                    this.addDummies();
                }
                /** @type {?} */
                var staticLength = 0;
                if (this._itemsStatic) {
                    staticLength = this._itemsStatic.length;
                }
                if (this.position < staticLength) {
                    this.loading$.next(true);
                    this._updateAfterRender$.next();
                    this.updateItems();
                    this.position += this.step;
                }
                else if (staticLength + this.position < this._items.length - this._dummies) {
                    this.loading$.next(true);
                    this._updateAfterRender$.next();
                    this.position += this.step;
                }
                else if (this._subscriptionEnd) {
                    this.loading$.next(true);
                    this._end$.next();
                    this.addDummies();
                    this.position += this.step;
                }
            };
        /**
         * @param {?} newItems
         * @return {?}
         */
        InfiniteScrollComponent.prototype.newItems = /**
         * @param {?} newItems
         * @return {?}
         */
            function (newItems) {
                var _this = this;
                while (this._dummies > 0) {
                    if (this._items.length) {
                        this._items.pop();
                    }
                    this._dummies--;
                }
                /** @type {?} */
                var newItemsArray = Array.from(newItems);
                this.zone.run(function () {
                    _this._items = _this._items.concat(newItemsArray);
                });
                // only continue when newItems arrive
                if (newItemsArray.length) {
                    this._updateAfterRender$.next();
                }
                else {
                    this._outOfItems = true;
                }
            };
        /**
         * @return {?}
         */
        InfiniteScrollComponent.prototype.updateItems = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.zone.run(function () {
                    for (var index in _this._itemsStatic) {
                        _this._itemsStatic[index].enabled = _this.position > index;
                    }
                });
            };
        /**
         * @return {?}
         */
        InfiniteScrollComponent.prototype.addDummies = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.zone.run(function () {
                    if (!_this._dummies && !_this._outOfItems) {
                        _this._items = _this._items.concat(Array(_this.step).fill(undefined));
                        _this._dummies += _this.step;
                    }
                });
            };
        InfiniteScrollComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'infinite-scroll',
                        template: "\n    <ng-template ngFor let-item [ngForOf]=\"_itemsStatic\">\n      <ng-template [ngIf]=\"item.enabled\">\n        <ng-container *ngTemplateOutlet=\"item.template\"></ng-container>\n      </ng-template>\n    </ng-template>\n    <ng-template ngFor let-item [ngForOf]=\"_items\">\n      <ng-container *ngTemplateOutlet=\"templateMarker.template; context: {$implicit: item}\"></ng-container>\n    </ng-template>"
                    },] },
        ];
        /** @nocollapse */
        InfiniteScrollComponent.ctorParameters = function () {
            return [
                { type: core.IterableDiffers },
                { type: core.NgZone }
            ];
        };
        InfiniteScrollComponent.propDecorators = {
            staticMarkers: [{ type: core.ContentChildren, args: [InfiniteStaticMarker,] }],
            templateMarker: [{ type: core.ContentChild, args: [InfiniteTemplateMarker,] }],
            dynamicTemplate: [{ type: core.ViewChild, args: ['dynamic',] }],
            position: [{ type: core.Input }],
            step: [{ type: core.Input }],
            offset: [{ type: core.Input }],
            delay: [{ type: core.Input }],
            loading: [{ type: core.Input }],
            end: [{ type: core.Input }]
        };
        return InfiniteScrollComponent;
    }(InfiniteScroll));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @template T
     */
    var InfiniteScrollDirective = (function (_super) {
        __extends(InfiniteScrollDirective, _super);
        function InfiniteScrollDirective(viewContainer, templateRef, differs, zone) {
            var _this = _super.call(this, differs, zone) || this;
            _this._positionInitial = DEFAULTS.POSITION;
            _this._dummies = 0;
            _this._outOfItems = false;
            _this.step = DEFAULTS.STEP;
            _this.offset = DEFAULTS.OFFSET;
            _this.delay = DEFAULTS.DELAY;
            _this.createNgFor(viewContainer, templateRef);
            return _this;
        }
        Object.defineProperty(InfiniteScrollDirective.prototype, "infiniteScrollOf", {
            set: /**
             * @param {?} infiniteScrollOf
             * @return {?}
             */ function (infiniteScrollOf) {
                if (infiniteScrollOf) {
                    this._items = Array.from(infiniteScrollOf);
                }
                this.position = this._positionInitial;
                this._dummies = 0;
                this.updateItems();
                this.update();
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(InfiniteScrollDirective.prototype, "infiniteScrollTrackBy", {
            get: /**
             * @return {?}
             */ function () {
                return this._ngFor.ngForTrackBy;
            },
            set: /**
             * @param {?} fn
             * @return {?}
             */ function (fn) {
                this._ngFor.ngForTrackBy = fn;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(InfiniteScrollDirective.prototype, "infiniteScrollTemplate", {
            set: /**
             * @param {?} value
             * @return {?}
             */ function (value) {
                this._ngFor.ngForTemplate = value;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(InfiniteScrollDirective.prototype, "infiniteScrollPosition", {
            set: /**
             * @param {?} position
             * @return {?}
             */ function (position) {
                if (position === undefined || position === null) {
                    this.position = DEFAULTS.POSITION;
                }
                else {
                    this.position = position;
                }
                this._positionInitial = position;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(InfiniteScrollDirective.prototype, "infiniteScrollLoading", {
            set: /**
             * @param {?} loading
             * @return {?}
             */ function (loading) {
                this.subscribeLoading(loading);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(InfiniteScrollDirective.prototype, "infiniteScrollEnd", {
            set: /**
             * @param {?} scrollEnd
             * @return {?}
             */ function (scrollEnd) {
                this.subscribeEnd(scrollEnd);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        InfiniteScrollDirective.prototype.update = /**
         * @return {?}
         */
            function () {
                if (!this._items) {
                    this._items = [];
                }
                if (this._items && (!this._items.length || this._items.every(function (item) { return item === undefined; }))) {
                    this._items = [];
                    this.addDummies();
                    this.updateItems();
                }
                if (this.position < this._items.length - this._dummies) {
                    this.loading$.next(true);
                    this.updateItems();
                    this._updateAfterRender$.next();
                    this.position += this.step;
                }
                else if (this._subscriptionEnd) {
                    this.loading$.next(true);
                    this._end$.next();
                    this.position += this.step;
                    this.addDummies();
                    this.updateItems();
                }
            };
        /**
         * @param {?} newItems
         * @return {?}
         */
        InfiniteScrollDirective.prototype.newItems = /**
         * @param {?} newItems
         * @return {?}
         */
            function (newItems) {
                while (this._dummies > 0) {
                    if (this._items.length) {
                        this._items.pop();
                    }
                    this._dummies--;
                }
                /** @type {?} */
                var newItemsArray = Array.from(newItems);
                this._items = this._items.concat(newItemsArray);
                this.updateItems();
                // only continue when newItems arrive
                if (newItemsArray.length) {
                    this._updateAfterRender$.next();
                }
                else {
                    this._outOfItems = true;
                }
            };
        /**
         * @return {?}
         */
        InfiniteScrollDirective.prototype.updateItems = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.zone.run(function () {
                    if (_this._items) {
                        // update ngForOf<T> directive
                        // update ngForOf<T> directive
                        _this._ngFor.ngForOf = _this._items.slice(0, _this.position);
                    }
                });
            };
        /**
         * @return {?}
         */
        InfiniteScrollDirective.prototype.addDummies = /**
         * @return {?}
         */
            function () {
                if (!this._dummies && !this._outOfItems) {
                    this._items = this._items.concat(Array(this.step).fill(undefined));
                    this._dummies += this.step;
                }
            };
        InfiniteScrollDirective.decorators = [
            { type: core.Directive, args: [{ selector: '[infiniteScroll]' },] },
        ];
        /** @nocollapse */
        InfiniteScrollDirective.ctorParameters = function () {
            return [
                { type: core.ViewContainerRef },
                { type: core.TemplateRef },
                { type: core.IterableDiffers },
                { type: core.NgZone }
            ];
        };
        InfiniteScrollDirective.propDecorators = {
            infiniteScrollOf: [{ type: core.Input }],
            infiniteScrollTrackBy: [{ type: core.Input }],
            infiniteScrollTemplate: [{ type: core.Input }],
            infiniteScrollPosition: [{ type: core.Input }],
            step: [{ type: core.Input, args: ['infiniteScrollStep',] }],
            offset: [{ type: core.Input, args: ['infiniteScrollOffset',] }],
            delay: [{ type: core.Input, args: ['infiniteScrollDelay',] }],
            infiniteScrollLoading: [{ type: core.Input }],
            infiniteScrollEnd: [{ type: core.Input }]
        };
        return InfiniteScrollDirective;
    }(InfiniteScroll));

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var InfiniteScrollModule = (function () {
        function InfiniteScrollModule() {
        }
        InfiniteScrollModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [InfiniteScrollDirective, InfiniteScrollComponent, InfiniteStaticMarker, InfiniteTemplateMarker],
                        imports: [common.CommonModule],
                        exports: [InfiniteScrollDirective, InfiniteScrollComponent, InfiniteStaticMarker, InfiniteTemplateMarker]
                    },] },
        ];
        return InfiniteScrollModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.InfiniteScrollModule = InfiniteScrollModule;
    exports.ɵb = InfiniteScroll;
    exports.ɵe = InfiniteScrollComponent;
    exports.ɵc = InfiniteStaticMarker;
    exports.ɵd = InfiniteTemplateMarker;
    exports.ɵa = InfiniteScrollDirective;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1pbmZpbml0ZS1zY3JvbGwudW1kLmpzLm1hcCIsInNvdXJjZXMiOltudWxsLCJuZzovL2FuZ3VsYXItaW5maW5pdGUtc2Nyb2xsL2xpYi9kZWZhdWx0cy50cyIsIm5nOi8vYW5ndWxhci1pbmZpbml0ZS1zY3JvbGwvbGliL2luZmluaXRlLXNjcm9sbC50cyIsIm5nOi8vYW5ndWxhci1pbmZpbml0ZS1zY3JvbGwvbGliL2luZmluaXRlLXNjcm9sbC5jb21wb25lbnQudHMiLCJuZzovL2FuZ3VsYXItaW5maW5pdGUtc2Nyb2xsL2xpYi9pbmZpbml0ZS1zY3JvbGwuZGlyZWN0aXZlLnRzIiwibmc6Ly9hbmd1bGFyLWluZmluaXRlLXNjcm9sbC9saWIvaW5maW5pdGUtc2Nyb2xsLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsImV4cG9ydCBjb25zdCBERUZBVUxUUyA9IHtcclxuICBTVEVQOiA0LFxyXG4gIFBPU0lUSU9OOiAwLFxyXG4gIE9GRlNFVDogMTAwLFxyXG4gIERFTEFZOiAwXHJcbn07IiwiaW1wb3J0IHtOZ0Zvck9mLCBOZ0Zvck9mQ29udGV4dH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcclxuaW1wb3J0IHtEb0NoZWNrLCBJdGVyYWJsZURpZmZlcnMsIE5nSXRlcmFibGUsIE5nWm9uZSwgT25EZXN0cm95LCBPbkluaXQsIFRlbXBsYXRlUmVmLCBWaWV3Q29udGFpbmVyUmVmfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtCZWhhdmlvclN1YmplY3QsIGludGVydmFsLCBtZXJnZSwgT2JzZXJ2YWJsZSwgU3ViamVjdCwgU3Vic2NyaXB0aW9ufSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHtleGhhdXN0TWFwLCBzd2l0Y2hNYXAsIHRha2V9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcclxuXHJcbmltcG9ydCB7REVGQVVMVFN9IGZyb20gJy4vZGVmYXVsdHMnO1xyXG5cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEluZmluaXRlU2Nyb2xsPFQ+IGltcGxlbWVudHMgT25Jbml0LCBEb0NoZWNrLCBPbkRlc3Ryb3kge1xyXG4gIHByaXZhdGUgX3N1YnNjcmlwdGlvbkxvYWRpbmc6IFN1YnNjcmlwdGlvbjtcclxuICBwcml2YXRlIF9zdWJzY3JpcHRpb25Mb2FkaW5nRW5kOiBTdWJzY3JpcHRpb247XHJcbiAgcHJpdmF0ZSBfdXNlckVuZCQgPSBuZXcgT2JzZXJ2YWJsZTxOZ0l0ZXJhYmxlPFQ+PigpO1xyXG5cclxuICBwcm90ZWN0ZWQgX3N1YnNjcmlwdGlvbkVuZDogU3Vic2NyaXB0aW9uO1xyXG4gIHByb3RlY3RlZCBfc3Vic2NyaXB0aW9uVXBkYXRlQWZ0ZXJSZW5kZXI6IFN1YnNjcmlwdGlvbjtcclxuXHJcbiAgcHJvdGVjdGVkIF9lbmQkID0gbmV3IFN1YmplY3Q8TmdJdGVyYWJsZTxUPj4oKTtcclxuICBwcm90ZWN0ZWQgX3VwZGF0ZUFmdGVyUmVuZGVyJCA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuXHJcbiAgcHJvdGVjdGVkIF9uZ0ZvcjtcclxuXHJcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBfZGlmZmVyczogSXRlcmFibGVEaWZmZXJzLCBwdWJsaWMgem9uZTogTmdab25lKSB7XHJcbiAgICB6b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHRoaXMuX3VwZGF0ZSgpKTtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHRoaXMuX3VwZGF0ZSgpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcG9zaXRpb24gPSBERUZBVUxUUy5QT1NJVElPTjtcclxuICBzdGVwID0gREVGQVVMVFMuU1RFUDtcclxuICBvZmZzZXQgPSBERUZBVUxUUy5PRkZTRVQ7XHJcbiAgZGVsYXkgPSBERUZBVUxUUy5ERUxBWTtcclxuICBsb2FkaW5nJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8Ym9vbGVhbj4oZmFsc2UpO1xyXG5cclxuICBuZ09uSW5pdCgpIHtcclxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbkxvYWRpbmdFbmQgPSBtZXJnZSh0aGlzLl91c2VyRW5kJCwgdGhpcy5fdXBkYXRlQWZ0ZXJSZW5kZXIkKS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5sb2FkaW5nJC5uZXh0KGZhbHNlKSk7XHJcbiAgICB0aGlzLl9zdWJzY3JpcHRpb25VcGRhdGVBZnRlclJlbmRlciA9XHJcbiAgICAgICAgdGhpcy5fdXBkYXRlQWZ0ZXJSZW5kZXIkLnBpcGUoc3dpdGNoTWFwKCgpID0+IGludGVydmFsKHRoaXMuZGVsYXkpLnBpcGUodGFrZSgxKSkpKS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5fdXBkYXRlKCkpO1xyXG5cclxuICAgIHRoaXMuX3VwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgbmdEb0NoZWNrKCkge1xyXG4gICAgaWYgKHRoaXMuX25nRm9yKSB7XHJcbiAgICAgIHRoaXMuX25nRm9yLm5nRG9DaGVjaygpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKSB7XHJcbiAgICB0aGlzLmRlc3Ryb3kodGhpcy5fc3Vic2NyaXB0aW9uRW5kKTtcclxuICAgIHRoaXMuZGVzdHJveSh0aGlzLl9zdWJzY3JpcHRpb25Mb2FkaW5nKTtcclxuICAgIHRoaXMuZGVzdHJveSh0aGlzLl9zdWJzY3JpcHRpb25Mb2FkaW5nRW5kKTtcclxuICAgIHRoaXMuZGVzdHJveSh0aGlzLl9zdWJzY3JpcHRpb25VcGRhdGVBZnRlclJlbmRlcik7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgY3JlYXRlTmdGb3Iodmlld0NvbnRhaW5lcjogVmlld0NvbnRhaW5lclJlZiwgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPE5nRm9yT2ZDb250ZXh0PFQ+Pikge1xyXG4gICAgdGhpcy5fbmdGb3IgPSBuZXcgTmdGb3JPZjxUPih2aWV3Q29udGFpbmVyLCB0ZW1wbGF0ZSwgdGhpcy5fZGlmZmVycyk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgc3Vic2NyaWJlTG9hZGluZyhsb2FkaW5nOiAobG9hZGluZzogYm9vbGVhbikgPT4gdm9pZCkge1xyXG4gICAgdGhpcy5kZXN0cm95KHRoaXMuX3N1YnNjcmlwdGlvbkxvYWRpbmcpO1xyXG4gICAgdGhpcy5fc3Vic2NyaXB0aW9uTG9hZGluZyA9IHRoaXMubG9hZGluZyQuc3Vic2NyaWJlKGxvYWRpbmcpO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIHN1YnNjcmliZUVuZChzY3JvbGxFbmQ6IChwb3NpdGlvbjogbnVtYmVyLCBpbnRlcnZhbDogbnVtYmVyKSA9PiBPYnNlcnZhYmxlPE5nSXRlcmFibGU8VD4+KSB7XHJcbiAgICB0aGlzLmRlc3Ryb3kodGhpcy5fc3Vic2NyaXB0aW9uRW5kKTtcclxuICAgIHRoaXMuX3VzZXJFbmQkID0gdGhpcy5fZW5kJC5waXBlKGV4aGF1c3RNYXAoKCkgPT4gc2Nyb2xsRW5kKHRoaXMucG9zaXRpb24sIHRoaXMuc3RlcCkpKTtcclxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbkVuZCA9IHRoaXMuX3VzZXJFbmQkLnN1YnNjcmliZSh0aGlzLm5ld0l0ZW1zLmJpbmQodGhpcyksICgpID0+IHRoaXMubmV3SXRlbXMuYmluZCh0aGlzKShbXSkpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfdXBkYXRlKCkge1xyXG4gICAgY29uc3Qgc2Nyb2xsSGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0ICsgd2luZG93LnNjcm9sbFk7XHJcbiAgICBpZiAoc2Nyb2xsSGVpZ2h0ID49IGRvY3VtZW50LmJvZHkub2Zmc2V0SGVpZ2h0IC0gdGhpcy5vZmZzZXQpIHtcclxuICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgZGVzdHJveShzdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbikge1xyXG4gICAgaWYgKHN1YnNjcmlwdGlvbiAmJiAhc3Vic2NyaXB0aW9uLmNsb3NlZCkge1xyXG4gICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBhYnN0cmFjdCB1cGRhdGUoKTtcclxuXHJcbiAgcHJvdGVjdGVkIGFic3RyYWN0IG5ld0l0ZW1zKG5ld0l0ZW1zOiBOZ0l0ZXJhYmxlPFQ+KTtcclxufVxyXG4iLCJpbXBvcnQge05nRm9yT2ZDb250ZXh0fSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge0FmdGVyQ29udGVudEluaXQsIENvbXBvbmVudCwgSW5wdXQsIEl0ZXJhYmxlRGlmZmVycywgTmdJdGVyYWJsZSwgTmdab25lLCBWaWV3Q2hpbGQsIFZpZXdDb250YWluZXJSZWZ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0NvbnRlbnRDaGlsZCwgQ29udGVudENoaWxkcmVuLCBEaXJlY3RpdmUsIFF1ZXJ5TGlzdCwgVGVtcGxhdGVSZWZ9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge09ic2VydmFibGV9IGZyb20gJ3J4anMnO1xyXG5cclxuaW1wb3J0IHtJbmZpbml0ZVNjcm9sbH0gZnJvbSAnLi9pbmZpbml0ZS1zY3JvbGwnO1xyXG5cclxuQERpcmVjdGl2ZSh7c2VsZWN0b3I6ICdbaW5maW5pdGVTdGF0aWNdJ30pXHJcbmV4cG9ydCBjbGFzcyBJbmZpbml0ZVN0YXRpY01hcmtlcjxUPiB7XHJcbiAgcHVibGljIGVuYWJsZWQgPSBmYWxzZTtcclxuICBjb25zdHJ1Y3RvcihwdWJsaWMgdGVtcGxhdGU6IFRlbXBsYXRlUmVmPFQ+KSB7fVxyXG59XHJcblxyXG5ARGlyZWN0aXZlKHtzZWxlY3RvcjogJ1tpbmZpbml0ZVRlbXBsYXRlXSd9KVxyXG5leHBvcnQgY2xhc3MgSW5maW5pdGVUZW1wbGF0ZU1hcmtlcjxUPiB7XHJcbiAgY29uc3RydWN0b3IocHVibGljIHRlbXBsYXRlOiBUZW1wbGF0ZVJlZjxOZ0Zvck9mQ29udGV4dDxUPj4pIHt9XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnaW5maW5pdGUtc2Nyb2xsJyxcclxuICB0ZW1wbGF0ZTogYFxyXG4gICAgPG5nLXRlbXBsYXRlIG5nRm9yIGxldC1pdGVtIFtuZ0Zvck9mXT1cIl9pdGVtc1N0YXRpY1wiPlxyXG4gICAgICA8bmctdGVtcGxhdGUgW25nSWZdPVwiaXRlbS5lbmFibGVkXCI+XHJcbiAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cIml0ZW0udGVtcGxhdGVcIj48L25nLWNvbnRhaW5lcj5cclxuICAgICAgPC9uZy10ZW1wbGF0ZT5cclxuICAgIDwvbmctdGVtcGxhdGU+XHJcbiAgICA8bmctdGVtcGxhdGUgbmdGb3IgbGV0LWl0ZW0gW25nRm9yT2ZdPVwiX2l0ZW1zXCI+XHJcbiAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJ0ZW1wbGF0ZU1hcmtlci50ZW1wbGF0ZTsgY29udGV4dDogeyRpbXBsaWNpdDogaXRlbX1cIj48L25nLWNvbnRhaW5lcj5cclxuICAgIDwvbmctdGVtcGxhdGU+YFxyXG59KVxyXG5leHBvcnQgY2xhc3MgSW5maW5pdGVTY3JvbGxDb21wb25lbnQ8VD4gZXh0ZW5kcyBJbmZpbml0ZVNjcm9sbDxUPiBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQge1xyXG4gIEBDb250ZW50Q2hpbGRyZW4oSW5maW5pdGVTdGF0aWNNYXJrZXIpIHN0YXRpY01hcmtlcnM6IFF1ZXJ5TGlzdDxJbmZpbml0ZVN0YXRpY01hcmtlcjxUPj47XHJcbiAgQENvbnRlbnRDaGlsZChJbmZpbml0ZVRlbXBsYXRlTWFya2VyKSB0ZW1wbGF0ZU1hcmtlcjogSW5maW5pdGVUZW1wbGF0ZU1hcmtlcjxUPjtcclxuICBAVmlld0NoaWxkKCdkeW5hbWljJykgZHluYW1pY1RlbXBsYXRlOiBWaWV3Q29udGFpbmVyUmVmO1xyXG5cclxuICBfaXRlbXNTdGF0aWM6IEFycmF5PEluZmluaXRlU3RhdGljTWFya2VyPFQ+PjtcclxuICBfaXRlbXM6IEFycmF5PFQ+O1xyXG5cclxuICBwcml2YXRlIF9kdW1taWVzID0gMDtcclxuICBwcml2YXRlIF9vdXRPZkl0ZW1zID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGRpZmZlcnM6IEl0ZXJhYmxlRGlmZmVycywgem9uZTogTmdab25lKSB7XHJcbiAgICBzdXBlcihkaWZmZXJzLCB6b25lKTtcclxuICB9XHJcblxyXG4gIEBJbnB1dCgpIHBvc2l0aW9uO1xyXG4gIEBJbnB1dCgpIHN0ZXA7XHJcbiAgQElucHV0KCkgb2Zmc2V0O1xyXG4gIEBJbnB1dCgpIGRlbGF5O1xyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGxvYWRpbmcobG9hZGluZzogKGxvYWRpbmc6IGJvb2xlYW4pID0+IHZvaWQpIHtcclxuICAgIHRoaXMuc3Vic2NyaWJlTG9hZGluZyhsb2FkaW5nKTtcclxuICB9XHJcbiAgQElucHV0KClcclxuICBzZXQgZW5kKHNjcm9sbEVuZDogKHBvc2l0aW9uOiBudW1iZXIsIGludGVydmFsOiBudW1iZXIpID0+IE9ic2VydmFibGU8TmdJdGVyYWJsZTxUPj4pIHtcclxuICAgIHRoaXMuc3Vic2NyaWJlRW5kKHNjcm9sbEVuZCk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XHJcbiAgICB0aGlzLl9pdGVtc1N0YXRpYyA9IHRoaXMuc3RhdGljTWFya2Vycy50b0FycmF5KCk7XHJcbiAgICB0aGlzLnVwZGF0ZUl0ZW1zKCk7XHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIHVwZGF0ZSgpIHtcclxuICAgIGlmICghdGhpcy5faXRlbXMpIHtcclxuICAgICAgdGhpcy5faXRlbXMgPSBbXTtcclxuICAgICAgdGhpcy5fZHVtbWllcyA9IDA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2l0ZW1zICYmICghdGhpcy5faXRlbXMubGVuZ3RoIHx8IHRoaXMuX2l0ZW1zLmV2ZXJ5KChpdGVtKSA9PiBpdGVtID09PSB1bmRlZmluZWQpKSkge1xyXG4gICAgICB0aGlzLl9pdGVtcyA9IFtdO1xyXG4gICAgICB0aGlzLl9kdW1taWVzID0gMDtcclxuICAgICAgdGhpcy5hZGREdW1taWVzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IHN0YXRpY0xlbmd0aCA9IDA7XHJcbiAgICBpZiAodGhpcy5faXRlbXNTdGF0aWMpIHtcclxuICAgICAgc3RhdGljTGVuZ3RoID0gdGhpcy5faXRlbXNTdGF0aWMubGVuZ3RoXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMucG9zaXRpb24gPCBzdGF0aWNMZW5ndGgpIHtcclxuICAgICAgdGhpcy5sb2FkaW5nJC5uZXh0KHRydWUpO1xyXG4gICAgICB0aGlzLl91cGRhdGVBZnRlclJlbmRlciQubmV4dCgpO1xyXG4gICAgICB0aGlzLnVwZGF0ZUl0ZW1zKCk7XHJcbiAgICAgIHRoaXMucG9zaXRpb24gKz0gdGhpcy5zdGVwO1xyXG4gICAgfSBlbHNlIGlmIChzdGF0aWNMZW5ndGggKyB0aGlzLnBvc2l0aW9uIDwgdGhpcy5faXRlbXMubGVuZ3RoIC0gdGhpcy5fZHVtbWllcykge1xyXG4gICAgICB0aGlzLmxvYWRpbmckLm5leHQodHJ1ZSk7XHJcbiAgICAgIHRoaXMuX3VwZGF0ZUFmdGVyUmVuZGVyJC5uZXh0KCk7XHJcbiAgICAgIHRoaXMucG9zaXRpb24gKz0gdGhpcy5zdGVwO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLl9zdWJzY3JpcHRpb25FbmQpIHtcclxuICAgICAgdGhpcy5sb2FkaW5nJC5uZXh0KHRydWUpO1xyXG4gICAgICB0aGlzLl9lbmQkLm5leHQoKTtcclxuICAgICAgdGhpcy5hZGREdW1taWVzKCk7XHJcbiAgICAgIHRoaXMucG9zaXRpb24gKz0gdGhpcy5zdGVwO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJvdGVjdGVkIG5ld0l0ZW1zKG5ld0l0ZW1zOiBOZ0l0ZXJhYmxlPFQ+KSB7XHJcbiAgICB3aGlsZSAodGhpcy5fZHVtbWllcyA+IDApIHtcclxuICAgICAgaWYgKHRoaXMuX2l0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLnBvcCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuX2R1bW1pZXMtLTtcclxuICAgIH1cclxuICAgIGNvbnN0IG5ld0l0ZW1zQXJyYXkgPSBBcnJheS5mcm9tKG5ld0l0ZW1zKTtcclxuICAgIHRoaXMuem9uZS5ydW4oKCkgPT4ge1xyXG4gICAgICB0aGlzLl9pdGVtcyA9IHRoaXMuX2l0ZW1zLmNvbmNhdChuZXdJdGVtc0FycmF5KTtcclxuICAgIH0pO1xyXG4gICAgLy8gb25seSBjb250aW51ZSB3aGVuIG5ld0l0ZW1zIGFycml2ZVxyXG4gICAgaWYgKG5ld0l0ZW1zQXJyYXkubGVuZ3RoKSB7XHJcbiAgICAgIHRoaXMuX3VwZGF0ZUFmdGVyUmVuZGVyJC5uZXh0KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9vdXRPZkl0ZW1zID0gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgdXBkYXRlSXRlbXMoKSB7XHJcbiAgICB0aGlzLnpvbmUucnVuKCgpID0+IHtcclxuICAgICAgZm9yIChjb25zdCBpbmRleCBpbiB0aGlzLl9pdGVtc1N0YXRpYykge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zU3RhdGljW2luZGV4XS5lbmFibGVkID0gdGhpcy5wb3NpdGlvbiA+IGluZGV4O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYWRkRHVtbWllcygpIHtcclxuICAgIHRoaXMuem9uZS5ydW4oKCkgPT4ge1xyXG4gICAgICBpZiAoIXRoaXMuX2R1bW1pZXMgJiYgIXRoaXMuX291dE9mSXRlbXMpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcyA9IHRoaXMuX2l0ZW1zLmNvbmNhdChBcnJheSh0aGlzLnN0ZXApLmZpbGwodW5kZWZpbmVkKSk7XHJcbiAgICAgICAgdGhpcy5fZHVtbWllcyArPSB0aGlzLnN0ZXA7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQge05nRm9yT2ZDb250ZXh0fSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge0RpcmVjdGl2ZSwgSW5wdXQsIEl0ZXJhYmxlRGlmZmVycywgTmdJdGVyYWJsZSwgT25EZXN0cm95LCBPbkluaXR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge05nWm9uZSwgVGVtcGxhdGVSZWYsIFRyYWNrQnlGdW5jdGlvbiwgVmlld0NvbnRhaW5lclJlZn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7REVGQVVMVFN9IGZyb20gJy4vZGVmYXVsdHMnO1xyXG5pbXBvcnQge0luZmluaXRlU2Nyb2xsfSBmcm9tICcuL2luZmluaXRlLXNjcm9sbCc7XHJcblxyXG5ARGlyZWN0aXZlKHtzZWxlY3RvcjogJ1tpbmZpbml0ZVNjcm9sbF0nfSlcclxuZXhwb3J0IGNsYXNzIEluZmluaXRlU2Nyb2xsRGlyZWN0aXZlPFQ+IGV4dGVuZHMgSW5maW5pdGVTY3JvbGw8VD4gaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XHJcbiAgcHJpdmF0ZSBfaXRlbXM6IEFycmF5PFQ+O1xyXG4gIHByaXZhdGUgX3Bvc2l0aW9uSW5pdGlhbCA9IERFRkFVTFRTLlBPU0lUSU9OO1xyXG5cclxuICBwcml2YXRlIF9kdW1taWVzID0gMDtcclxuICBwcml2YXRlIF9vdXRPZkl0ZW1zID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHZpZXdDb250YWluZXI6IFZpZXdDb250YWluZXJSZWYsIHRlbXBsYXRlUmVmOiBUZW1wbGF0ZVJlZjxOZ0Zvck9mQ29udGV4dDxUPj4sIGRpZmZlcnM6IEl0ZXJhYmxlRGlmZmVycywgem9uZTogTmdab25lKSB7XHJcbiAgICBzdXBlcihkaWZmZXJzLCB6b25lKTtcclxuICAgIHRoaXMuY3JlYXRlTmdGb3Iodmlld0NvbnRhaW5lciwgdGVtcGxhdGVSZWYpO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KClcclxuICBzZXQgaW5maW5pdGVTY3JvbGxPZihpbmZpbml0ZVNjcm9sbE9mOiBOZ0l0ZXJhYmxlPFQ+KSB7XHJcbiAgICBpZiAoaW5maW5pdGVTY3JvbGxPZikge1xyXG4gICAgICB0aGlzLl9pdGVtcyA9IEFycmF5LmZyb20oaW5maW5pdGVTY3JvbGxPZik7XHJcbiAgICB9XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gdGhpcy5fcG9zaXRpb25Jbml0aWFsO1xyXG4gICAgdGhpcy5fZHVtbWllcyA9IDA7XHJcbiAgICB0aGlzLnVwZGF0ZUl0ZW1zKCk7XHJcbiAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gIH1cclxuICBASW5wdXQoKVxyXG4gIHNldCBpbmZpbml0ZVNjcm9sbFRyYWNrQnkoZm46IFRyYWNrQnlGdW5jdGlvbjxUPikge1xyXG4gICAgdGhpcy5fbmdGb3IubmdGb3JUcmFja0J5ID0gZm47XHJcbiAgfVxyXG4gIGdldCBpbmZpbml0ZVNjcm9sbFRyYWNrQnkoKTogVHJhY2tCeUZ1bmN0aW9uPFQ+IHtcclxuICAgIHJldHVybiB0aGlzLl9uZ0Zvci5uZ0ZvclRyYWNrQnk7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoKVxyXG4gIHNldCBpbmZpbml0ZVNjcm9sbFRlbXBsYXRlKHZhbHVlOiBUZW1wbGF0ZVJlZjxOZ0Zvck9mQ29udGV4dDxUPj4pIHtcclxuICAgIHRoaXMuX25nRm9yLm5nRm9yVGVtcGxhdGUgPSB2YWx1ZTtcclxuICB9XHJcblxyXG4gIEBJbnB1dCgpXHJcbiAgc2V0IGluZmluaXRlU2Nyb2xsUG9zaXRpb24ocG9zaXRpb24pIHtcclxuICAgIGlmIChwb3NpdGlvbiA9PT0gdW5kZWZpbmVkIHx8IHBvc2l0aW9uID09PSBudWxsKSB7XHJcbiAgICAgIHRoaXMucG9zaXRpb24gPSBERUZBVUxUUy5QT1NJVElPTjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcclxuICAgIH1cclxuICAgIHRoaXMuX3Bvc2l0aW9uSW5pdGlhbCA9IHBvc2l0aW9uO1xyXG4gIH1cclxuICBASW5wdXQoJ2luZmluaXRlU2Nyb2xsU3RlcCcpIHN0ZXAgPSBERUZBVUxUUy5TVEVQO1xyXG4gIEBJbnB1dCgnaW5maW5pdGVTY3JvbGxPZmZzZXQnKSBvZmZzZXQgPSBERUZBVUxUUy5PRkZTRVQ7XHJcbiAgQElucHV0KCdpbmZpbml0ZVNjcm9sbERlbGF5JykgZGVsYXkgPSBERUZBVUxUUy5ERUxBWTtcclxuICBASW5wdXQoKVxyXG4gIHNldCBpbmZpbml0ZVNjcm9sbExvYWRpbmcobG9hZGluZzogKGxvYWRpbmc6IGJvb2xlYW4pID0+IHZvaWQpIHtcclxuICAgIHRoaXMuc3Vic2NyaWJlTG9hZGluZyhsb2FkaW5nKTtcclxuICB9XHJcbiAgQElucHV0KClcclxuICBzZXQgaW5maW5pdGVTY3JvbGxFbmQoc2Nyb2xsRW5kOiAocG9zaXRpb246IG51bWJlciwgaW50ZXJ2YWw6IG51bWJlcikgPT4gT2JzZXJ2YWJsZTxOZ0l0ZXJhYmxlPFQ+Pikge1xyXG4gICAgdGhpcy5zdWJzY3JpYmVFbmQoc2Nyb2xsRW5kKTtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCB1cGRhdGUoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2l0ZW1zKSB7XHJcbiAgICAgIHRoaXMuX2l0ZW1zID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2l0ZW1zICYmICghdGhpcy5faXRlbXMubGVuZ3RoIHx8IHRoaXMuX2l0ZW1zLmV2ZXJ5KChpdGVtKSA9PiBpdGVtID09PSB1bmRlZmluZWQpKSkge1xyXG4gICAgICB0aGlzLl9pdGVtcyA9IFtdO1xyXG4gICAgICB0aGlzLmFkZER1bW1pZXMoKTtcclxuICAgICAgdGhpcy51cGRhdGVJdGVtcygpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLnBvc2l0aW9uIDwgdGhpcy5faXRlbXMubGVuZ3RoIC0gdGhpcy5fZHVtbWllcykge1xyXG4gICAgICB0aGlzLmxvYWRpbmckLm5leHQodHJ1ZSk7XHJcbiAgICAgIHRoaXMudXBkYXRlSXRlbXMoKTtcclxuICAgICAgdGhpcy5fdXBkYXRlQWZ0ZXJSZW5kZXIkLm5leHQoKTtcclxuICAgICAgdGhpcy5wb3NpdGlvbiArPSB0aGlzLnN0ZXA7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3N1YnNjcmlwdGlvbkVuZCkge1xyXG4gICAgICB0aGlzLmxvYWRpbmckLm5leHQodHJ1ZSk7XHJcbiAgICAgIHRoaXMuX2VuZCQubmV4dCgpO1xyXG4gICAgICB0aGlzLnBvc2l0aW9uICs9IHRoaXMuc3RlcDtcclxuICAgICAgdGhpcy5hZGREdW1taWVzKCk7XHJcbiAgICAgIHRoaXMudXBkYXRlSXRlbXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBuZXdJdGVtcyhuZXdJdGVtczogTmdJdGVyYWJsZTxUPikge1xyXG4gICAgd2hpbGUgKHRoaXMuX2R1bW1pZXMgPiAwKSB7XHJcbiAgICAgIGlmICh0aGlzLl9pdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcy5wb3AoKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9kdW1taWVzLS07XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdJdGVtc0FycmF5ID0gQXJyYXkuZnJvbShuZXdJdGVtcyk7XHJcbiAgICB0aGlzLl9pdGVtcyA9IHRoaXMuX2l0ZW1zLmNvbmNhdChuZXdJdGVtc0FycmF5KTtcclxuICAgIHRoaXMudXBkYXRlSXRlbXMoKTtcclxuICAgIC8vIG9ubHkgY29udGludWUgd2hlbiBuZXdJdGVtcyBhcnJpdmVcclxuICAgIGlmIChuZXdJdGVtc0FycmF5Lmxlbmd0aCkge1xyXG4gICAgICB0aGlzLl91cGRhdGVBZnRlclJlbmRlciQubmV4dCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fb3V0T2ZJdGVtcyA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgcHJpdmF0ZSB1cGRhdGVJdGVtcygpIHtcclxuICAgIHRoaXMuem9uZS5ydW4oKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5faXRlbXMpIHtcclxuICAgICAgICAvLyB1cGRhdGUgbmdGb3JPZjxUPiBkaXJlY3RpdmVcclxuICAgICAgICB0aGlzLl9uZ0Zvci5uZ0Zvck9mID0gdGhpcy5faXRlbXMuc2xpY2UoMCwgdGhpcy5wb3NpdGlvbik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGREdW1taWVzKCkge1xyXG4gICAgaWYgKCF0aGlzLl9kdW1taWVzICYmICF0aGlzLl9vdXRPZkl0ZW1zKSB7XHJcbiAgICAgIHRoaXMuX2l0ZW1zID0gdGhpcy5faXRlbXMuY29uY2F0KEFycmF5KHRoaXMuc3RlcCkuZmlsbCh1bmRlZmluZWQpKTtcclxuICAgICAgdGhpcy5fZHVtbWllcyArPSB0aGlzLnN0ZXA7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7Q29tbW9uTW9kdWxlfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQge05nTW9kdWxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7SW5maW5pdGVTY3JvbGxDb21wb25lbnQsIEluZmluaXRlU3RhdGljTWFya2VyLCBJbmZpbml0ZVRlbXBsYXRlTWFya2VyfSBmcm9tICcuL2luZmluaXRlLXNjcm9sbC5jb21wb25lbnQnO1xyXG5pbXBvcnQge0luZmluaXRlU2Nyb2xsRGlyZWN0aXZlfSBmcm9tICcuL2luZmluaXRlLXNjcm9sbC5kaXJlY3RpdmUnO1xyXG5cclxuQE5nTW9kdWxlKHtcclxuICBkZWNsYXJhdGlvbnM6IFtJbmZpbml0ZVNjcm9sbERpcmVjdGl2ZSwgSW5maW5pdGVTY3JvbGxDb21wb25lbnQsIEluZmluaXRlU3RhdGljTWFya2VyLCBJbmZpbml0ZVRlbXBsYXRlTWFya2VyXSxcclxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlXSxcclxuICBleHBvcnRzOiBbSW5maW5pdGVTY3JvbGxEaXJlY3RpdmUsIEluZmluaXRlU2Nyb2xsQ29tcG9uZW50LCBJbmZpbml0ZVN0YXRpY01hcmtlciwgSW5maW5pdGVUZW1wbGF0ZU1hcmtlcl1cclxufSlcclxuZXhwb3J0IGNsYXNzIEluZmluaXRlU2Nyb2xsTW9kdWxlIHtcclxufVxyXG4iXSwibmFtZXMiOlsiT2JzZXJ2YWJsZSIsIlN1YmplY3QiLCJCZWhhdmlvclN1YmplY3QiLCJtZXJnZSIsInN3aXRjaE1hcCIsImludGVydmFsIiwidGFrZSIsIk5nRm9yT2YiLCJleGhhdXN0TWFwIiwiRGlyZWN0aXZlIiwiVGVtcGxhdGVSZWYiLCJ0c2xpYl8xLl9fZXh0ZW5kcyIsIkNvbXBvbmVudCIsIkl0ZXJhYmxlRGlmZmVycyIsIk5nWm9uZSIsIkNvbnRlbnRDaGlsZHJlbiIsIkNvbnRlbnRDaGlsZCIsIlZpZXdDaGlsZCIs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